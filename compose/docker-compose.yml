version: '3'

services:
    app-db:
        image: mysql
        networks:
            - backend

    app-db-schema:
        image: dockerbrownbag-schema
        links:
            - app-db
        depends_on:
            - app-db
        networks:
            - backend

    rest-services:
        image: rest-services
        links:
            - app-db
        depends_on:
            - app-db
        networks:
            - frontend
            - backend

    web:
        image: web
        ports: 
            - 80:80
        links:
            - rest-services
        depends_on:
            - rest-services
        networks:
            - frontend
networks:
    backend:
        driver: bridge
    frontend:
        driver: bridge


